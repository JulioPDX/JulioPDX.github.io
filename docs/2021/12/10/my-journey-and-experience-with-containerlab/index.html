<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="">
<meta name="description" content="Introduction Thank you all for checking out this post. This is going to be a special one. Due to the fact that I had such a joy using this new tool (new to me). I don‚Äôt like to over hype tools or new things just to hype it up. There are times where a tool or technology does deserve the credit and time in the limelight. I think Containerlabs is one of those tools." />
<meta name="keywords" content=", Containerlab, Network Automation, Python, Docker, Ansible" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://juliopdx.com/2021/12/10/my-journey-and-experience-with-containerlab/" />


    <title>
        
            My Journey and Experience With Containerlab :: Welcome to the World of Tomorrow  ‚Äî Welcome to my blog!
        
    </title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="/main.17863a81d979b637a02cd7632a4d86e9d80563ef460fd6af1a56962efcaa066b.css">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">
    <meta name="theme-color" content="">



<meta itemprop="name" content="My Journey and Experience With Containerlab">
<meta itemprop="description" content="Introduction Thank you all for checking out this post. This is going to be a special one. Due to the fact that I had such a joy using this new tool (new to me). I don‚Äôt like to over hype tools or new things just to hype it up. There are times where a tool or technology does deserve the credit and time in the limelight. I think Containerlabs is one of those tools.">
<meta itemprop="datePublished" content="2021-12-10T14:32:22-08:00" />
<meta itemprop="dateModified" content="2021-12-10T14:32:22-08:00" />
<meta itemprop="wordCount" content="3496">
<meta itemprop="image" content="https://juliopdx.com/"/>



<meta itemprop="keywords" content="Containerlab,Network Automation,Python,Docker,Ansible," />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://juliopdx.com/"/>

<meta name="twitter:title" content="My Journey and Experience With Containerlab"/>
<meta name="twitter:description" content="Introduction Thank you all for checking out this post. This is going to be a special one. Due to the fact that I had such a joy using this new tool (new to me). I don‚Äôt like to over hype tools or new things just to hype it up. There are times where a tool or technology does deserve the credit and time in the limelight. I think Containerlabs is one of those tools."/>




    <meta property="og:title" content="My Journey and Experience With Containerlab" />
<meta property="og:description" content="Introduction Thank you all for checking out this post. This is going to be a special one. Due to the fact that I had such a joy using this new tool (new to me). I don‚Äôt like to over hype tools or new things just to hype it up. There are times where a tool or technology does deserve the credit and time in the limelight. I think Containerlabs is one of those tools." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://juliopdx.com/2021/12/10/my-journey-and-experience-with-containerlab/" />
<meta property="og:image" content="https://juliopdx.com/"/>
<meta property="article:published_time" content="2021-12-10T14:32:22-08:00" />
<meta property="article:modified_time" content="2021-12-10T14:32:22-08:00" /><meta property="og:site_name" content="Welcome to the World of Tomorrow" />






    <meta property="article:published_time" content="2021-12-10 14:32:22 -0800 PST" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">#</span>
            <span class="logo__text">JulioPDX</span>
            <span class="logo__cursor" style=
                  "
                   background-color:#41FF00;
                   animation-duration:2s;">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/posts">Blog</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
                <span class="theme-toggle not-selectable"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
   <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
   3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
   13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
 </svg></span>
        </span>
    </span>
</header>


            <div class="content">
                
  <main class="post">

    <div class="post-info">
      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        17 minutes

        
      </p>
    </div>

    <article>
      <h1 class="post-title">
        <a href="https://juliopdx.com/2021/12/10/my-journey-and-experience-with-containerlab/">My Journey and Experience With Containerlab</a>
      </h1>

      

      
        <hr />
        <aside id="toc">
          <div class="toc-title">Table of Contents</div>
          <nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#where-are-we">Where are we?</a></li>
    <li><a href="#why-containerlab">Why Containerlab?</a></li>
    <li><a href="#getting-started-with-containerlab">Getting Started With Containerlab</a>
      <ul>
        <li><a href="#installing-containerlab">Installing Containerlab</a></li>
        <li><a href="#how-to-add-networking-images-to-containerlab">How to Add Networking Images to Containerlab</a></li>
        <li><a href="#the-topology-definition-file">The Topology Definition File</a></li>
      </ul>
    </li>
    <li><a href="#deploying-a-topology">Deploying a Topology</a></li>
    <li><a href="#connecting-to-nodes">Connecting to Nodes</a></li>
    <li><a href="#viewing-the-topology">Viewing the Topology</a></li>
    <li><a href="#automating-some-configuration">Automating Some Configuration</a>
      <ul>
        <li><a href="#nornir-with-ansible-inventory">Nornir With Ansible Inventory</a></li>
        <li><a href="#deployment-scripts">Deployment Scripts</a></li>
        <li><a href="#sample-configuration">Sample Configuration</a></li>
        <li><a href="#simple-verifications">Simple Verifications</a></li>
      </ul>
    </li>
    <li><a href="#destroying-a-topology">Destroying a Topology</a></li>
    <li><a href="#closing-thoughts">Closing Thoughts</a></li>
    <li><a href="#outro-and-links">Outro and Links</a></li>
  </ul>
</nav>
        </aside>
        <hr />

      

      <div class="post-content">
        <h2 id="introduction">Introduction</h2>
<p>Thank you all for checking out this post. This is going to be a special one. Due to the fact that I had such a joy using this new tool (new to me). I don‚Äôt like to over hype tools or new things just to hype it up. There are times where a tool or technology does deserve the credit and time in the limelight. I think Containerlabs is one of those tools.</p>
<h2 id="where-are-we">Where are we?</h2>
<p>Before I get started on defining Containerlab, I think its important to mention where we have come from in the networking industry. In the past when a learner or fellow engineer wanted to test a technology, design, or topology, they would have to acquire physical gear. This would take up a lot of space, power, and can you imagine the cost back in the day? I say back in the day like it was 30 years ago. More like less than 10.</p>
<p>The next phase added virtual versions of network operating systems, these could then be added to some hypervisor and stand up a virtual lab. Much more efficient but still required a lot of steps to get going and now required a server or some machine to host all the virtual machines. In the last few years, tools have sprung up to make this process even more simple (EVE-NG, GNS3, CML2).</p>
<p>I don‚Äôt want to knock these tools as I still think they are pretty incredible and provide a lot of useful features. Like anything in tech, there are trade offs. With any of these tools, there is still a requirement to have a VM or workstation available that can run said tool and then run your NOS images. For the most part these can be CPU and memory intensive, depending on the image. The process of adding the individual images can be a pain as well depending on the tool itself.</p>
<h2 id="why-containerlab">Why Containerlab?</h2>
<p>So this is where Containerlab comes in. If you read my previous CI/CD blog series, I mentioned how quick and easy it was to get applications going by just running a packaged Docker container. This could be Drone, Batfish, or Suzeiq. Imagine that simplicity but for networking images. Containerlab was created to simplify the process of creating networking topologies within a Docker environment. I‚Äôll do my best to walk you through some of the features of Containerlab and hopefully you walk away as impressed as I was.</p>
<h2 id="getting-started-with-containerlab">Getting Started With Containerlab</h2>
<p>One of the main requirements of Containerlab is to have an environment with Linux and Docker available. In my case, I am running a Linux laptop running <a href="https://pop.system76.com/">PopOS</a>. For instructions on getting Docker installed, please see this <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04">example</a> by the team at Digital Ocean.</p>
<h3 id="installing-containerlab">Installing Containerlab</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># download and install the latest release (may require sudo)</span>
bash -c <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>curl -sL https://get-clab.srlinux.dev<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><h3 id="how-to-add-networking-images-to-containerlab">How to Add Networking Images to Containerlab</h3>
<p>At this time there are a few network vendors that make acquiring container images for their NOS simple. Nokia (SR Linux) is a great example of that. In their case, you can just pull the image from a public repository to make it available to Containerlab. Others may require you to sign up for some guest account in their portal to get access to images. There are some that make you pick up the old telephone and ask for access, and others that don&rsquo;t make any of these an option. To all vendors ‚Äúplease make container images of your NOS and make it publicly available‚Äù. I will walk through the process of adding an Arista cEOS image to be used with Containerlab.</p>
<ul>
<li>Create <a href="https://www.arista.com/en/login">Arista</a> account, image access should be available right after verifying</li>
<li>Head to <a href="https://www.arista.com/en/support/software-download">software downloads</a></li>
</ul>
<p><img src="/blog/images/ceos-download.png" alt="cEOS Download"></p>
<p>Now that the image is downloaded, we need to make it available to Docker and Containerlab.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ docker import cEOS-lab-4.27.0F.tar ceos:4.27.0F
‚ùØ docker images
REPOSITORY                        TAG            IMAGE ID       CREATED          SIZE
ceos                              4.27.0F        b7119ccccbcd   <span style="color:#ae81ff">27</span> seconds ago   1.68GB
</code></pre></div><h3 id="the-topology-definition-file">The Topology Definition File</h3>
<p>Now that we have a NOS container image available, we can start the initial process of standing up a lab topology. In Containerlab, this is known as the <strong>clab file</strong>. In the root on my current directory, I will create a file called <strong>net.clab.yaml</strong>. Example of my file is below. I will break down each portion in a bit.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">name</span>: <span style="color:#ae81ff">cicd</span>
<span style="color:#f92672">prefix</span>: <span style="color:#e6db74">&#34;&#34;</span>

<span style="color:#f92672">mgmt</span>:
  <span style="color:#f92672">network</span>: <span style="color:#ae81ff">statics</span>
  <span style="color:#f92672">ipv4_subnet</span>: <span style="color:#ae81ff">172.100.100.0</span><span style="color:#ae81ff">/24</span>

<span style="color:#f92672">topology</span>:
  <span style="color:#f92672">kinds</span>:
    <span style="color:#f92672">ceos</span>:
      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ceos:4.27.0F</span>
    <span style="color:#f92672">linux</span>:
      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ghcr.io/hellt/network-multitool</span>
  <span style="color:#f92672">nodes</span>:
    <span style="color:#f92672">pdx-rtr-eos-01</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.11</span>
    <span style="color:#f92672">pdx-rtr-eos-02</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.12</span>
    <span style="color:#f92672">pdx-rtr-eos-03</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.13</span>
    <span style="color:#f92672">pdx-rtr-eos-04</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ceos:4.27.0F</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.14</span>
    <span style="color:#f92672">client1</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">linux</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.21</span>
    <span style="color:#f92672">client2</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">linux</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.22</span>
  <span style="color:#f92672">links</span>:
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;pdx-rtr-eos-01:eth1&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-02:eth1&#34;</span>]
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;pdx-rtr-eos-02:eth2&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-03:eth1&#34;</span>]
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;pdx-rtr-eos-03:eth2&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-04:eth1&#34;</span>]
    <span style="color:#75715e"># Client connections</span>
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;client1:eth1&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-01:eth2&#34;</span>]
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;client2:eth1&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-04:eth2&#34;</span>]
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">name</span>: <span style="color:#ae81ff">cicd</span>
<span style="color:#f92672">prefix</span>: <span style="color:#e6db74">&#34;&#34;</span>
</code></pre></div><p>All labs must have a name at the top of the tree. This is great if you are deploying multiple labs and will prevent any conflict between them. By default lab nodes will be named using the following structure: <strong>clab-{{lab-name}}-{{node-name}}</strong>. For my example, rtr-01 would have the name of <strong>clab-cicd-pdx-rtr-eos-01</strong>. I am setting the <strong>prefix</strong> to <code>‚Äú‚Äù</code>, this will remove the prefix of <strong>clab-cicd</strong> on each node. That is more of a preference and not required.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">mgmt</span>:
  <span style="color:#f92672">network</span>: <span style="color:#ae81ff">statics</span>
  <span style="color:#f92672">ipv4_subnet</span>: <span style="color:#ae81ff">172.100.100.0</span><span style="color:#ae81ff">/24</span>
</code></pre></div><p>Here we are telling Containerlab to stand up a Docker network named <strong>statics</strong> that can then be assigned to our nodes.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">topology</span>:
  <span style="color:#f92672">kinds</span>:
    <span style="color:#f92672">ceos</span>:
      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ceos:4.27.0F</span>
    <span style="color:#f92672">linux</span>:
      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ghcr.io/hellt/network-multitool</span>
</code></pre></div><p>This is something I thought was really useful. Containerlab works by defining nodes with what kind of node it is and what image will be used for that node. The kind can be something like ceos, linux, crpd, and others. The documentation does an incredible job of breaking it all down. I will link the docs at the end of this post. In this example I am setting the kind of ‚Äúceos.image = ceos:4.27.0F‚Äù. This helps remove a lot of duplication when building out topology files with similar nodes.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">nodes</span>:
    <span style="color:#f92672">pdx-rtr-eos-01</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.11</span>
    <span style="color:#f92672">pdx-rtr-eos-02</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.12</span>
    <span style="color:#f92672">pdx-rtr-eos-03</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.13</span>
    <span style="color:#f92672">pdx-rtr-eos-04</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">ceos</span>
      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">ceos:4.27.0F</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.14</span>
    <span style="color:#f92672">client1</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">linux</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.21</span>
    <span style="color:#f92672">client2</span>:
      <span style="color:#f92672">kind</span>: <span style="color:#ae81ff">linux</span>
      <span style="color:#f92672">mgmt_ipv4</span>: <span style="color:#ae81ff">172.100.100.22</span>
</code></pre></div><p>This is where a lot of what has been defined is tied together. I will break down the first eos node and client node. Here, pdx-rtr-eos-01, is assigned the kind of ceos and will inherit the image of ‚Äúceos:4.27.0F‚Äù. This node will then be accessible either by IP address at 172.100.100.11 or by hostname or by the docker exec commands. I will show these examples in a bit. The client image is similar, it is a kind of linux and will inherit the image of ‚Äúghcr.io/hellt/network-multitool‚Äù, a publicly available image. If you notice I never had to pull down the image myself. It was handled by Containerlab.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#f92672">links</span>:
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;pdx-rtr-eos-01:eth1&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-02:eth1&#34;</span>]
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;pdx-rtr-eos-02:eth2&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-03:eth1&#34;</span>]
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;pdx-rtr-eos-03:eth2&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-04:eth1&#34;</span>]
    <span style="color:#75715e"># Client connections</span>
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;client1:eth1&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-01:eth2&#34;</span>]
    - <span style="color:#f92672">endpoints</span>: [<span style="color:#e6db74">&#34;client2:eth1&#34;</span>, <span style="color:#e6db74">&#34;pdx-rtr-eos-04:eth2&#34;</span>]
</code></pre></div><p>The links portion is fairly simple but it does require some planning on the front end. The link numbering is defined in the Containerlab documentation and even the examples helped me create this links format. It looks fairly simple but the magic going on behind the scenes is awesome.</p>
<h2 id="deploying-a-topology">Deploying a Topology</h2>
<p>I may have lost you at this point but please bear with me. Lets get to the fun stuff.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ time sudo containerlab deploy -t net.clab.yaml
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Parsing &amp; checking topology file: net.clab.yaml
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating lab directory: /home/juliopdx/git/gcl/cicd
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating docker network: Name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;statics&#39;</span>, IPv4Subnet<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;172.100.100.0/24&#39;</span>, IPv6Subnet<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, MTU<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;1500&#39;</span>
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating container: client1
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating container: client2
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating container: pdx-rtr-eos-04
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating container: pdx-rtr-eos-03
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating container: pdx-rtr-eos-01
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Creating container: pdx-rtr-eos-02
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Creating virtual wire: client2:eth1 &lt;--&gt; pdx-rtr-eos-04:eth2
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Creating virtual wire: pdx-rtr-eos-03:eth2 &lt;--&gt; pdx-rtr-eos-04:eth1
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Creating virtual wire: client1:eth1 &lt;--&gt; pdx-rtr-eos-01:eth2
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Creating virtual wire: pdx-rtr-eos-01:eth1 &lt;--&gt; pdx-rtr-eos-02:eth1
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Creating virtual wire: pdx-rtr-eos-02:eth2 &lt;--&gt; pdx-rtr-eos-03:eth1
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Running postdeploy actions <span style="color:#66d9ef">for</span> Arista cEOS <span style="color:#e6db74">&#39;pdx-rtr-eos-03&#39;</span> node
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Running postdeploy actions <span style="color:#66d9ef">for</span> Arista cEOS <span style="color:#e6db74">&#39;pdx-rtr-eos-04&#39;</span> node
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Running postdeploy actions <span style="color:#66d9ef">for</span> Arista cEOS <span style="color:#e6db74">&#39;pdx-rtr-eos-01&#39;</span> node
INFO<span style="color:#f92672">[</span>0001<span style="color:#f92672">]</span> Running postdeploy actions <span style="color:#66d9ef">for</span> Arista cEOS <span style="color:#e6db74">&#39;pdx-rtr-eos-02&#39;</span> node
INFO<span style="color:#f92672">[</span>0056<span style="color:#f92672">]</span> Adding containerlab host entries to /etc/hosts file
</code></pre></div><p>Lets walk through this a bit. Containerlab will spin up a directory named after our lab name, <strong>cicd</strong>. It will then create any management networks we have defined, in our case this will be the 172.100.100.0/24 network. After that each container is created and virtual links added. At the tail end you may have noticed that the Containerlab hosts were added to the <strong>/etc/hosts</strong> file. Containerlab is nice enough to provide a summary of everything that was deployed. Example below.</p>
<p><img src="/blog/images/deploy-containerlab.png" alt="Deploy Topo"></p>
<p>At the bottom you can see that it took 57 seconds to deploy the 4 cEOS containers and two Linux containers that will act as hosts. In theory we should be able to connect to the nodes?</p>
<p><img src="/blog/images/ping-container.png" alt="Ping Container"></p>
<h2 id="connecting-to-nodes">Connecting to Nodes</h2>
<p>Great, now we have everything deployed but we need to do something with it. If folks are testing or learning a NOS, naturally we want to connect to the nodes to start laying down some sweet configuration. Luckily, we have a few options to connect to each node.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ ssh admin@cicd-pdx-rtr-eos-01
Password:
pdx-rtr-eos-01&gt;en
pdx-rtr-eos-01#show version | inc image version
Software image version: 4.27.0F-24305004.4270F <span style="color:#f92672">(</span>engineering build<span style="color:#f92672">)</span>
pdx-rtr-eos-01#
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ ssh admin@172.100.100.11
Password:
pdx-rtr-eos-01&gt;en
pdx-rtr-eos-01#show version | inc image version
Software image version: 4.27.0F-24305004.4270F <span style="color:#f92672">(</span>engineering build<span style="color:#f92672">)</span>
pdx-rtr-eos-01#
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ docker exec -it cicd-pdx-rtr-eos-01 Cli
pdx-rtr-eos-01&gt;en
pdx-rtr-eos-01#show version | inc image version
Software image version: 4.27.0F-24305004.4270F <span style="color:#f92672">(</span>engineering build<span style="color:#f92672">)</span>
pdx-rtr-eos-01#
</code></pre></div><h2 id="viewing-the-topology">Viewing the Topology</h2>
<p>I‚Äôm so used to using tools like GNS3 and EVE-NG. Both of these tools provide some type of GUI to view the current topology. Maybe its because I‚Äôm a visual person, but I really like to view the topology. Can you believe with a bit of digging‚Ä¶ I found out that Containerlab can render a topology image. Example below. FYI, I don‚Äôt think the graph enjoyed all the dashes in my hostnames. I‚Äôll post the original when I found this feature!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ sudo containerlab graph -t net.clab.yaml
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Parsing &amp; checking topology file: net.clab.yaml
INFO<span style="color:#f92672">[</span>0000<span style="color:#f92672">]</span> Listening on :50080...
</code></pre></div><p><img src="/blog/images/container-graph.jpeg" alt="Container Graph"></p>
<p>Above is the original image I generated after I found this out. Seriously awesome! I would like to see the interfaces displayed though‚Ä¶ I know I know, we had to define this in the links so who cares? I care! I want to see them in the generated image! üôÇ</p>
<h2 id="automating-some-configuration">Automating Some Configuration</h2>
<p><img src="/blog/images/ci_cd_blog.png" alt="High Level Diagram"></p>
<p>A while back I wrote a series on building a CI/CD pipeline. In that series, I used a generic topology with four Arista nodes running OSPF and BGP. I wanted to see if I could recreate this topology in Containerlab and utilize some of the automation skills I have been practicing. I wont go all in on this post but I will drop some configuration with Nornir and NAPALM using the Ansible inventory Containerlab created. Oh yeah, Containerlab creates an Ansible inventory when deploying a topology. Example of the inventory that was created after I deployed this topology is below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">all</span>:
  <span style="color:#f92672">children</span>:
    <span style="color:#f92672">ceos</span>:
      <span style="color:#f92672">hosts</span>:
        <span style="color:#f92672">cicd-pdx-rtr-eos-01</span>:
          <span style="color:#f92672">ansible_host</span>: <span style="color:#ae81ff">172.100.100.11</span>
        <span style="color:#f92672">cicd-pdx-rtr-eos-02</span>:
          <span style="color:#f92672">ansible_host</span>: <span style="color:#ae81ff">172.100.100.12</span>
        <span style="color:#f92672">cicd-pdx-rtr-eos-03</span>:
          <span style="color:#f92672">ansible_host</span>: <span style="color:#ae81ff">172.100.100.13</span>
        <span style="color:#f92672">cicd-pdx-rtr-eos-04</span>:
          <span style="color:#f92672">ansible_host</span>: <span style="color:#ae81ff">172.100.100.14</span>
    <span style="color:#f92672">linux</span>:
      <span style="color:#f92672">hosts</span>:
        <span style="color:#f92672">cicd-client1</span>:
          <span style="color:#f92672">ansible_host</span>: <span style="color:#ae81ff">172.100.100.21</span>
        <span style="color:#f92672">cicd-client2</span>:
          <span style="color:#f92672">ansible_host</span>: <span style="color:#ae81ff">172.100.100.22</span>
</code></pre></div><h3 id="nornir-with-ansible-inventory">Nornir With Ansible Inventory</h3>
<p>Nornir has a plugin to interact with an Ansible inventory, after getting Nornir installed, its just a matter of installing the plugin and setting the inventory to use that plugin.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">pip install nornir nornir_ansible nornir_napalm
</code></pre></div><p><code>Nornir config.yaml</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">---
<span style="color:#f92672">inventory</span>:
  <span style="color:#f92672">plugin</span>: <span style="color:#ae81ff">AnsibleInventory</span>
  <span style="color:#f92672">options</span>:
    <span style="color:#f92672">hostsfile</span>: <span style="color:#e6db74">&#34;cicd/ansible-inventory.yml&#34;</span>

<span style="color:#f92672">runner</span>:
  <span style="color:#f92672">plugin</span>: <span style="color:#ae81ff">threaded</span>
  <span style="color:#f92672">options</span>:
    <span style="color:#f92672">num_workers</span>: <span style="color:#ae81ff">10</span>
</code></pre></div><p>Below is a function used to set credentials and platform for the nodes in this deployment.</p>
<h3 id="deployment-scripts">Deployment Scripts</h3>
<p><code>tools.py</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#e6db74">&#34;&#34;&#34;Tools script that holds a variety of functions&#34;&#34;&#34;</span>

<span style="color:#f92672">import</span> os


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">nornir_set_creds</span>(norn, username<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;admin&#34;</span>, password<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;admin&#34;</span>, platform<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;eos&#34;</span>):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Handler for credentials and platform
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> username:
        username <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>environ<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;NORNIR_USER&#34;</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> password:
        password <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>environ<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;MY_SECRET&#34;</span>)

    <span style="color:#66d9ef">for</span> host_obj <span style="color:#f92672">in</span> norn<span style="color:#f92672">.</span>inventory<span style="color:#f92672">.</span>hosts<span style="color:#f92672">.</span>values():
        host_obj<span style="color:#f92672">.</span>username <span style="color:#f92672">=</span> username
        host_obj<span style="color:#f92672">.</span>password <span style="color:#f92672">=</span> password
        host_obj<span style="color:#f92672">.</span>platform <span style="color:#f92672">=</span> platform
</code></pre></div><p><code>deploy.py</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#!/usr/bin/env python</span>

<span style="color:#e6db74">&#34;&#34;&#34;Script used to configure the network&#34;&#34;&#34;</span>

<span style="color:#f92672">from</span> nornir <span style="color:#f92672">import</span> InitNornir
<span style="color:#f92672">from</span> nornir_utils.plugins.functions <span style="color:#f92672">import</span> print_result
<span style="color:#f92672">from</span> nornir_napalm.plugins.tasks <span style="color:#f92672">import</span> napalm_configure
<span style="color:#f92672">from</span> tools <span style="color:#f92672">import</span> nornir_set_creds


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">deploy_network</span>(task):
    <span style="color:#e6db74">&#34;&#34;&#34;Configures network with Scrapli&#34;&#34;&#34;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#34;client&#34;</span> <span style="color:#f92672">in</span> task<span style="color:#f92672">.</span>host<span style="color:#f92672">.</span>name:
        <span style="color:#66d9ef">pass</span>
    <span style="color:#66d9ef">else</span>:
        task1_result <span style="color:#f92672">=</span> task<span style="color:#f92672">.</span>run(
            name<span style="color:#f92672">=</span>f<span style="color:#e6db74">&#34;Configuring {task.host.name}!&#34;</span>,
            task<span style="color:#f92672">=</span>napalm_configure,
            filename<span style="color:#f92672">=</span>f<span style="color:#e6db74">&#34;configs/post/{task.host.name}.cfg&#34;</span>,
            replace<span style="color:#f92672">=</span>True,
        )


<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
    <span style="color:#e6db74">&#34;&#34;&#34;Used to run all the things&#34;&#34;&#34;</span>
    norn <span style="color:#f92672">=</span> InitNornir(config_file<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;nornir_settings/config.yaml&#34;</span>)
    nornir_set_creds(norn)
    result <span style="color:#f92672">=</span> norn<span style="color:#f92672">.</span>run(task<span style="color:#f92672">=</span>deploy_network)
    print_result(result)


<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
    main()
</code></pre></div><h3 id="sample-configuration">Sample Configuration</h3>
<p><code>cicd-pdx-rtr-eos-01.cfg</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">! Command: show running-config
! device: pdx-rtr-eos-01 (cEOSLab, EOS-4.27.0F-24305004.4270F (engineering build))
!
no aaa root
!
username admin privilege 15 role network-admin secret sha512 $6$RxQ5ae0GOW6SAiCU$7qzQNGX2pSIqWIYBIYGF8Xh30lo/s418/diYEEZj9rPrTJiAkYv0s6AvjpTfUHMGz.a58Hg29Yy/nV0Zvplux0
!
transceiver qsfp default-mode 4x10G
!
service routing protocols model multi-agent
!
hostname pdx-rtr-eos-01
!
spanning-tree mode mstp
!
management api http-commands
   no shutdown
!
management api gnmi
   transport grpc default
!
management api netconf
   transport ssh default
!
interface Ethernet1
   description connection to pdx-rtr-eos-02
   no switchport
   ip address 10.0.12.1/24
   ip ospf network point-to-point
   ip ospf area 0.0.0.0
!
!
interface Ethernet2
   no switchport
   ip address 192.168.1.1/24
   ip ospf area 0.0.0.0
!
interface Loopback1
   ip address 10.0.0.1/32
   ip ospf area 0.0.0.0
!
interface Management0
   ip address 172.100.100.11/24
!
ip routing
!
router bgp 65001
   router-id 10.0.0.1
   timers bgp 10 30
   neighbor 10.0.0.4 remote-as 65004
   neighbor 10.0.0.4 update-source Loopback1
   neighbor 10.0.0.4 ebgp-multihop 3
!
router ospf 1
   router-id 10.0.0.1
   passive-interface Ethernet2
   passive-interface Loopback1
   max-lsa 12000
!
endtext
</code></pre></div><p>Script output below! I‚Äôll set the client1 and client2 IP addresses in the meantime!</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">‚ùØ docker exec -it cicd-client1 bash
bash-5.0# ifconfig eth1 192.168.1.2 netmask 255.255.255.0 up
bash-5.0# route add default gw 192.168.1.1
bash-5.0# ping -c <span style="color:#ae81ff">4</span> 192.168.1.1
PING 192.168.1.1 <span style="color:#f92672">(</span>192.168.1.1<span style="color:#f92672">)</span> 56<span style="color:#f92672">(</span>84<span style="color:#f92672">)</span> bytes of data.
<span style="color:#ae81ff">64</span> bytes from 192.168.1.1: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">64</span> time<span style="color:#f92672">=</span>0.064 ms
<span style="color:#ae81ff">64</span> bytes from 192.168.1.1: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">64</span> time<span style="color:#f92672">=</span>0.074 ms
<span style="color:#ae81ff">64</span> bytes from 192.168.1.1: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">64</span> time<span style="color:#f92672">=</span>0.080 ms
<span style="color:#ae81ff">64</span> bytes from 192.168.1.1: icmp_seq<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> ttl<span style="color:#f92672">=</span><span style="color:#ae81ff">64</span> time<span style="color:#f92672">=</span>0.073 ms

--- 192.168.1.1 ping statistics ---
<span style="color:#ae81ff">4</span> packets transmitted, <span style="color:#ae81ff">4</span> received, 0% packet loss, time 3072ms
rtt min/avg/max/mdev <span style="color:#f92672">=</span> 0.064/0.072/0.080/0.005 ms
bash-5.0# ifconfig eth1
eth1      Link encap:Ethernet  HWaddr AA:C1:AB:94:0D:B0
          inet addr:192.168.1.2  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: fe80::a8c1:abff:fe94:db0/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:9500  Metric:1
          RX packets:1754 errors:0 dropped:0 overruns:0 frame:0
          TX packets:26 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:218275 <span style="color:#f92672">(</span>213.1 KiB<span style="color:#f92672">)</span>  TX bytes:2112 <span style="color:#f92672">(</span>2.0 KiB<span style="color:#f92672">)</span>

bash-5.0# exit
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#960050;background-color:#1e0010">‚ùØ</span> python deploy<span style="color:#f92672">.</span>py
deploy_network<span style="color:#f92672">******************************************************************</span>
<span style="color:#f92672">*</span> cicd<span style="color:#f92672">-</span>client1 <span style="color:#f92672">**</span> changed : False <span style="color:#f92672">**********************************************</span>
vvvv deploy_network <span style="color:#f92672">**</span> changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
<span style="color:#f92672">^^^^</span> END deploy_network <span style="color:#f92672">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span style="color:#f92672">*</span> cicd<span style="color:#f92672">-</span>client2 <span style="color:#f92672">**</span> changed : False <span style="color:#f92672">**********************************************</span>
vvvv deploy_network <span style="color:#f92672">**</span> changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
<span style="color:#f92672">^^^^</span> END deploy_network <span style="color:#f92672">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span style="color:#f92672">*</span> cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">01</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">****************************************</span>
vvvv deploy_network <span style="color:#f92672">**</span> changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
<span style="color:#f92672">----</span> Configuring cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">01</span><span style="color:#960050;background-color:#1e0010">!</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">------------------------</span> INFO
<span style="color:#960050;background-color:#1e0010">@@</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">12</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">37</span> <span style="color:#960050;background-color:#1e0010">@@</span>
    transport ssh default
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet1
<span style="color:#f92672">+</span>   description connection to pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">02</span>
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">12.1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf network point<span style="color:#f92672">-</span>to<span style="color:#f92672">-</span>point
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet2
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">192.168</span><span style="color:#f92672">.</span><span style="color:#ae81ff">1.1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>interface Loopback1
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">32</span>
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Management0
    ip address <span style="color:#ae81ff">172.100</span><span style="color:#f92672">.</span><span style="color:#ae81ff">100.11</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">-</span>no ip routing
<span style="color:#f92672">+</span>ip routing
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>router bgp <span style="color:#ae81ff">65001</span>
<span style="color:#f92672">+</span>   router<span style="color:#f92672">-</span>id <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.1</span>
<span style="color:#f92672">+</span>   timers bgp <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">30</span>
<span style="color:#f92672">+</span>   neighbor <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.4</span> remote<span style="color:#f92672">-</span><span style="color:#66d9ef">as</span> <span style="color:#ae81ff">65004</span>
<span style="color:#f92672">+</span>   neighbor <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.4</span> update<span style="color:#f92672">-</span>source Loopback1
<span style="color:#f92672">+</span>   neighbor <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.4</span> ebgp<span style="color:#f92672">-</span>multihop <span style="color:#ae81ff">3</span>
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>router ospf <span style="color:#ae81ff">1</span>
<span style="color:#f92672">+</span>   router<span style="color:#f92672">-</span>id <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.1</span>
<span style="color:#f92672">+</span>   passive<span style="color:#f92672">-</span>interface Ethernet2
<span style="color:#f92672">+</span>   passive<span style="color:#f92672">-</span>interface Loopback1
<span style="color:#f92672">+</span>   max<span style="color:#f92672">-</span>lsa <span style="color:#ae81ff">12000</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 end
<span style="color:#f92672">^^^^</span> END deploy_network <span style="color:#f92672">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span style="color:#f92672">*</span> cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">02</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">****************************************</span>
vvvv deploy_network <span style="color:#f92672">**</span> changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
<span style="color:#f92672">----</span> Configuring cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">02</span><span style="color:#960050;background-color:#1e0010">!</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">------------------------</span> INFO
<span style="color:#960050;background-color:#1e0010">@@</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">12</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">26</span> <span style="color:#960050;background-color:#1e0010">@@</span>
    transport ssh default
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet1
<span style="color:#f92672">+</span>   description connection to pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">01</span>
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">12.2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf network point<span style="color:#f92672">-</span>to<span style="color:#f92672">-</span>point
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet2
<span style="color:#f92672">+</span>   description connection to pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">03</span>
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">23.2</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf network point<span style="color:#f92672">-</span>to<span style="color:#f92672">-</span>point
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Management0
    ip address <span style="color:#ae81ff">172.100</span><span style="color:#f92672">.</span><span style="color:#ae81ff">100.12</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">-</span>no ip routing
<span style="color:#f92672">+</span>ip routing
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>router ospf <span style="color:#ae81ff">1</span>
<span style="color:#f92672">+</span>   router<span style="color:#f92672">-</span>id <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.2</span>
<span style="color:#f92672">+</span>   max<span style="color:#f92672">-</span>lsa <span style="color:#ae81ff">12000</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 end
<span style="color:#f92672">^^^^</span> END deploy_network <span style="color:#f92672">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span style="color:#f92672">*</span> cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">03</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">****************************************</span>
vvvv deploy_network <span style="color:#f92672">**</span> changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
<span style="color:#f92672">----</span> Configuring cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">03</span><span style="color:#960050;background-color:#1e0010">!</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">------------------------</span> INFO
<span style="color:#960050;background-color:#1e0010">@@</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">6</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">12</span>,<span style="color:#ae81ff">8</span> <span style="color:#960050;background-color:#1e0010">@@</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 spanning<span style="color:#f92672">-</span>tree mode mstp
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>vrf instance MGMT
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
 management api http<span style="color:#f92672">-</span>commands
    no shutdown
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#960050;background-color:#1e0010">@@</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">12</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">24</span>,<span style="color:#ae81ff">27</span> <span style="color:#960050;background-color:#1e0010">@@</span>
    transport ssh default
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet1
<span style="color:#f92672">+</span>   description connection to pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">02</span>
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">23.3</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf network point<span style="color:#f92672">-</span>to<span style="color:#f92672">-</span>point
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet2
<span style="color:#f92672">+</span>   description connection to pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">04</span>
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">34.3</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf network point<span style="color:#f92672">-</span>to<span style="color:#f92672">-</span>point
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Management0
    ip address <span style="color:#ae81ff">172.100</span><span style="color:#f92672">.</span><span style="color:#ae81ff">100.13</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">-</span>no ip routing
<span style="color:#f92672">+</span>ip routing
<span style="color:#f92672">+</span>no ip routing vrf MGMT
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>router ospf <span style="color:#ae81ff">1</span>
<span style="color:#f92672">+</span>   router<span style="color:#f92672">-</span>id <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.3</span>
<span style="color:#f92672">+</span>   max<span style="color:#f92672">-</span>lsa <span style="color:#ae81ff">12000</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 end
<span style="color:#f92672">^^^^</span> END deploy_network <span style="color:#f92672">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span style="color:#f92672">*</span> cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">04</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">****************************************</span>
vvvv deploy_network <span style="color:#f92672">**</span> changed : False vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv INFO
<span style="color:#f92672">----</span> Configuring cicd<span style="color:#f92672">-</span>pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">04</span><span style="color:#960050;background-color:#1e0010">!</span> <span style="color:#f92672">**</span> changed : True <span style="color:#f92672">------------------------</span> INFO
<span style="color:#960050;background-color:#1e0010">@@</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">7</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">7</span> <span style="color:#960050;background-color:#1e0010">@@</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 no aaa root
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">-</span>username admin privilege <span style="color:#ae81ff">15</span> role network<span style="color:#f92672">-</span>admin secret sha512 <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">$</span><span style="color:#ae81ff">80</span>vAK4C7egYGmMCr<span style="color:#960050;background-color:#1e0010">$</span>aQs6Oe1HPzToV9KkGBQozUNUzaelo8cM6EXUzDfsjPF4q<span style="color:#f92672">/</span>LJDb3WOtP01uqrCzKJWk3KpOMno40Df1nsilfwI<span style="color:#f92672">/</span>
<span style="color:#f92672">+</span>username admin privilege <span style="color:#ae81ff">15</span> role network<span style="color:#f92672">-</span>admin secret sha512 <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">$</span>RxQ5ae0GOW6SAiCU<span style="color:#960050;background-color:#1e0010">$</span><span style="color:#ae81ff">7</span>qzQNGX2pSIqWIYBIYGF8Xh30lo<span style="color:#f92672">/</span>s418<span style="color:#f92672">/</span>diYEEZj9rPrTJiAkYv0s6AvjpTfUHMGz<span style="color:#f92672">.</span>a58Hg29Yy<span style="color:#f92672">/</span>nV0Zvplux0
 <span style="color:#960050;background-color:#1e0010">!</span>
 transceiver qsfp default<span style="color:#f92672">-</span>mode <span style="color:#ae81ff">4</span>x10G
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#960050;background-color:#1e0010">@@</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">12</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">22</span>,<span style="color:#ae81ff">37</span> <span style="color:#960050;background-color:#1e0010">@@</span>
    transport ssh default
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet1
<span style="color:#f92672">+</span>   description connection to pdx<span style="color:#f92672">-</span>rtr<span style="color:#f92672">-</span>eos<span style="color:#f92672">-</span><span style="color:#ae81ff">03</span>
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">34.4</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf network point<span style="color:#f92672">-</span>to<span style="color:#f92672">-</span>point
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Ethernet2
<span style="color:#f92672">+</span>   no switchport
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">192.168</span><span style="color:#f92672">.</span><span style="color:#ae81ff">4.1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>interface Loopback1
<span style="color:#f92672">+</span>   ip address <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.4</span><span style="color:#f92672">/</span><span style="color:#ae81ff">32</span>
<span style="color:#f92672">+</span>   ip ospf area <span style="color:#ae81ff">0.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.0</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 interface Management0
    ip address <span style="color:#ae81ff">172.100</span><span style="color:#f92672">.</span><span style="color:#ae81ff">100.14</span><span style="color:#f92672">/</span><span style="color:#ae81ff">24</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">-</span>no ip routing
<span style="color:#f92672">+</span>ip routing
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>router bgp <span style="color:#ae81ff">65004</span>
<span style="color:#f92672">+</span>   router<span style="color:#f92672">-</span>id <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.4</span>
<span style="color:#f92672">+</span>   timers bgp <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">30</span>
<span style="color:#f92672">+</span>   neighbor <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.1</span> remote<span style="color:#f92672">-</span><span style="color:#66d9ef">as</span> <span style="color:#ae81ff">65001</span>
<span style="color:#f92672">+</span>   neighbor <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.1</span> update<span style="color:#f92672">-</span>source Loopback1
<span style="color:#f92672">+</span>   neighbor <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.1</span> ebgp<span style="color:#f92672">-</span>multihop <span style="color:#ae81ff">3</span>
<span style="color:#f92672">+</span><span style="color:#960050;background-color:#1e0010">!</span>
<span style="color:#f92672">+</span>router ospf <span style="color:#ae81ff">1</span>
<span style="color:#f92672">+</span>   router<span style="color:#f92672">-</span>id <span style="color:#ae81ff">10.0</span><span style="color:#f92672">.</span><span style="color:#ae81ff">0.4</span>
<span style="color:#f92672">+</span>   passive<span style="color:#f92672">-</span>interface Ethernet2
<span style="color:#f92672">+</span>   passive<span style="color:#f92672">-</span>interface Loopback1
<span style="color:#f92672">+</span>   max<span style="color:#f92672">-</span>lsa <span style="color:#ae81ff">12000</span>
 <span style="color:#960050;background-color:#1e0010">!</span>
 end
<span style="color:#f92672">^^^^</span> END deploy_network <span style="color:#f92672">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
</code></pre></div><h3 id="simple-verifications">Simple Verifications</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">pdx-rtr-eos-01#show ip ospf neighbor
Neighbor ID     Instance VRF      Pri State                  Dead Time   Address         Interface
10.0.0.2        1        default  0   FULL                   00:00:38    10.0.12.2       Ethernet1
pdx-rtr-eos-01#show ip route ospf

 O        10.0.0.4/32 [110/40] via 10.0.12.2, Ethernet1
 O        10.0.23.0/24 [110/20] via 10.0.12.2, Ethernet1
 O        10.0.34.0/24 [110/30] via 10.0.12.2, Ethernet1
 O        192.168.4.0/24 [110/40] via 10.0.12.2, Ethernet1

pdx-rtr-eos-01#show ip bgp summary
BGP summary information for VRF default
Router identifier 10.0.0.1, local AS number 65001
Neighbor Status Codes: m - Under maintenance
  Neighbor         V AS           MsgRcvd   MsgSent  InQ OutQ  Up/Down State   PfxRcd PfxAcc
  10.0.0.4         4 65004             86        86    0    0 00:11:34 Estab   0      0
pdx-rtr-eos-01#ping 192.168.4.1
PING 192.168.4.1 (192.168.4.1) 72(100) bytes of data.
80 bytes from 192.168.4.1: icmp_seq=1 ttl=62 time=0.164 ms
80 bytes from 192.168.4.1: icmp_seq=2 ttl=62 time=0.041 ms
80 bytes from 192.168.4.1: icmp_seq=3 ttl=62 time=0.033 ms
80 bytes from 192.168.4.1: icmp_seq=4 ttl=62 time=0.034 ms
80 bytes from 192.168.4.1: icmp_seq=5 ttl=62 time=0.033 ms

--- 192.168.4.1 ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.033/0.061/0.164/0.051 ms, ipg/ewma 0.094/0.110 ms
pdx-rtr-eos-01#
</code></pre></div><p>At this point client1 (192.168.1.2) should be able to reach client2 (192.168.4.2)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">‚ùØ docker exec -it cicd-client1 bash
bash-5.0# ping -c 4 192.168.4.2
PING 192.168.4.2 (192.168.4.2) 56(84) bytes of data.
64 bytes from 192.168.4.2: icmp_seq=1 ttl=60 time=0.202 ms
64 bytes from 192.168.4.2: icmp_seq=2 ttl=60 time=0.186 ms
64 bytes from 192.168.4.2: icmp_seq=3 ttl=60 time=0.215 ms
64 bytes from 192.168.4.2: icmp_seq=4 ttl=60 time=0.254 ms

--- 192.168.4.2 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3066ms
rtt min/avg/max/mdev = 0.186/0.214/0.254/0.025 ms
bash-5.0#
</code></pre></div><h2 id="destroying-a-topology">Destroying a Topology</h2>
<p>When destroying the lab there are two main options. Well really there is more but the other sounds dangerous! You can either destroy the lab which is more like shutting it down. Or you can destroy a lab and cleanup all directories/configurations that have been configured. The former will maintain configurations when you deploy again and the latter will revert to a factory reset if you will.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># Maintain configurations after shutdown</span>
sudo containerlab destroy -t net.clab.yaml
<span style="color:#75715e"># Destroy all configurations</span>
sudo containerlab destroy -t net.clab.yaml --cleanup
</code></pre></div><h2 id="closing-thoughts">Closing Thoughts</h2>
<p>I think Containerlabs is pretty freaking awesome. The fact that I can deploy this topology in under a minute is crazy and just from my laptop. I can see Containerlab in so many different avenues. Architects testing out a design, Engineers doing it all, or students on their initial journey down the networking path or IT in general. One of the coolest things that comes to mind is Containerlab in a classroom settings. Just imagine the Instructor or teacher creates a topology file. At this point were assuming the class has a Linux system and Docker installed. The instructor then says ‚ÄúOkay students today we‚Äôll be going over topology <code>&lt;insert awesome topology&gt;.clab.yaml</code>. Students then learn about why a design was chosen or the technologies involved.</p>
<h2 id="outro-and-links">Outro and Links</h2>
<p>Thank you all so much for reading this far. I hope this wasn‚Äôt too long. GitHub repository is linked below! I was kind of building this on the fly and the documentation for Containerlab is pretty excellent. If you have any questions seriously check it out. Most all of your questions will be answered there!</p>
<ul>
<li><a href="https://containerlab.srlinux.dev/">Containerlab Documentation</a></li>
<li><a href="https://netsim-tools.readthedocs.io/en/latest/">Another Option: netsim-tools by Ivan Pepelnjak</a></li>
<li><a href="https://github.com/JulioPDX/gcl">GitHub repository for code used in this blog</a></li>
</ul>

      </div>
    </article>

    <hr />

    <div class="post-info">
      
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://juliopdx.com/tags/containerlab/">Containerlab</a></span>
        <span class="tag"><a href="https://juliopdx.com/tags/network-automation/">Network Automation</a></span>
        <span class="tag"><a href="https://juliopdx.com/tags/python/">Python</a></span>
        <span class="tag"><a href="https://juliopdx.com/tags/docker/">Docker</a></span>
        <span class="tag"><a href="https://juliopdx.com/tags/ansible/">Ansible</a></span>
        
    </p>

      

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
          <polyline points="10 9 9 9 8 9"></polyline>
        </svg>
        3496 Words
      </p>

      <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        
          2021-12-10 14:32
        

         
          
        
      </p>
    </div>

    
    <div class="pagination">
        <div class="pagination__title">
            <span class="pagination__title-h">Read other posts</span>
            <hr />
        </div>

        <div class="pagination__buttons">
            
            <span class="button previous">
                <a href="https://juliopdx.com/2022/01/12/learning-a-little-about-search-algorithms-with-python/">
                    <span class="button__icon">‚Üê</span>
                    <span class="button__text">Learning a Little About Search Algorithms With Python</span>
                </a>
            </span>
            

            
            <span class="button next">
                <a href="https://juliopdx.com/2021/12/06/my-journey-learning-about-juniper-junos/">
                    <span class="button__text">My Journey Learning About Juniper Junos</span>
                    <span class="button__icon">‚Üí</span>
                </a>
            </span>
            
        </div>
    </div>


    

    

  </main>

            </div>

            
                <footer class="footer">
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2022</span>
            <span><a href="https://juliopdx.com/"></a></span>
            
            <span><a href="https://juliopdx.com/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
            
        </div>
    </div>
    
    
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span><span>Made with &#10084; by <a href="https://github.com/rhazdon">Djordje Atlialp</a></span>
        </div>
    </div>
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.ace63d93098bf623f7c286a9084a4c22bfc482944c734f87fe0b685c7c6c7fa0ad2edb028c3b4b60d3343720c8ab490b320ad7f8edf4f6e9a6b898fc529057a9.js" integrity="sha512-rOY9kwmL9iP3woapCEpMIr/EgpRMc0&#43;H/gtoXHxsf6CtLtsCjDtLYNM0NyDIq0kLMgrX&#43;O309ummuJj8UpBXqQ=="></script>



    </body>
</html>
